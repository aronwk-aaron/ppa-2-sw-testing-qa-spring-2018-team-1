language: python
python:
- '3.6'
before_install:
- openssl aes-256-cbc -K $encrypted_0716dadb053a_key -iv $encrypted_0716dadb053a_iv
  -in client-secret.json.enc -out client-secret.json -d
install:
- pip install -r requirements.txt
- pip install -e .
script:
- pytest --pyargs app --pylama --cov=app tests/
after_success:
- wget https://raw.githubusercontent.com/k3rn31p4nic/travis-ci-discord-webhook/master/send.sh
- chmod +x send.sh
- "./send.sh success $WEBHOOK_URL"
- coveralls
after_failure:
- wget https://raw.githubusercontent.com/k3rn31p4nic/travis-ci-discord-webhook/master/send.sh
- chmod +x send.sh
- "./send.sh failure $WEBHOOK_URL"
deploy:
  provider: gae
  keyfile: client-secret.json
  project: ppa-2-team-1
notifications:
  email: false
